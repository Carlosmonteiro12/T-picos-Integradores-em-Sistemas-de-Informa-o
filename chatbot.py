# -*- coding: utf-8 -*-
"""chatbot.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1RQizarIGsBP4rtcDt0LpPLAhtwX9mngi
"""


import spacy
import random
import time

nlp = spacy.load("pt_core_news_sm")

produtos = {
    "celular": ["Apple iPhone 14", "Samsung Galaxy S23", "Motorola Edge 30 Neo"],
    "notebook": ["Dell XPS 13 Plus", "Apple Macbook Air M2", "Lenovo ThinkPad X1 Carbon"],
    "acessÃ³rio": ["Fone Bluetooth JBL Tune 510BT", "Carregador Turbo Samsung 25W", "Mouse Gamer Logitech G203"]
}

faq = {
    "localizacao": "ğŸ“ Nossa loja estÃ¡ localizada na Rua do Sol, nÂº 266 - Recife - PE , CEP: 52320-560.",
    "horario": "ğŸ•’ Nosso horÃ¡rio de atendimento Ã© de segunda a sexta, das 08h00 Ã s 18h00, e aos sÃ¡bados das 08h00 Ã s 12h00.",
    "suporte": "ğŸ› ï¸ Para suporte tÃ©cnico, entre em contato pelo e-mail: suporte@endolog.com ou pelo telefone (81) 4002-9230.",
    "status_pedido": "ğŸ“¦ Para consultar o status do seu pedido, acesse nosso site na seÃ§Ã£o 'Meus Pedidos' ou fale com um atendente."
}

def saudacao():
    print("=" * 60)
    print("ğŸ¤–  Bem-vindo(a) Ã  *EndoLog Store - Assistente Virtual*")
    print("Estamos aqui para proporcionar a melhor experiÃªncia de compra.")
    print("=" * 60)
    print("\nPor favor, selecione uma das opÃ§Ãµes ou envie sua pergunta:")
    print("""
    ğŸ›’  Consultar produtos
    ğŸ¯  Receber recomendaÃ§Ãµes
    ğŸ“  LocalizaÃ§Ã£o da loja
    ğŸ•’  HorÃ¡rio de funcionamento
    ğŸ› ï¸  Suporte tÃ©cnico
    ğŸ“¦  Consultar status de pedido
    ğŸ‘¨â€ğŸ’¼  Falar com um atendente humano
    âŒ  Encerrar atendimento
    """)
    print("=" * 60)

def entender_intencao(texto):
    texto = texto.lower()

    if any(p in texto for p in ["oi", "olÃ¡", "bom dia", "boa tarde", "boa noite"]):
        return "saudacao"

    elif any(p in texto for p in ["produto", "consultar", "tem", "possui", "vender", "vende", "quais produtos", "qual produto"]):
        return "consultar_produto"

    elif any(p in texto for p in ["recomenda", "sugestÃ£o", "indica", "qual Ã© o melhor", "me sugere"]):
        return "recomendacao"

    elif any(p in texto for p in ["onde fica", "localizaÃ§Ã£o", "endereÃ§o", "como chegar"]):
        return "localizacao"

    elif any(p in texto for p in ["horÃ¡rio", "funciona", "que horas", "aberto", "atendimento"]):
        return "horario"

    elif any(p in texto for p in ["suporte", "assistÃªncia", "ajuda tÃ©cnica", "problema", "manutenÃ§Ã£o"]):
        return "suporte"

    elif any(p in texto for p in ["pedido", "status", "acompanhar", "rastreamento", "meu pedido"]):
        return "status_pedido"

    elif any(p in texto for p in ["atendente", "humano", "pessoa", "falar com alguÃ©m", "alguÃ©m"]):
        return "atendente"

    elif any(p in texto for p in ["sair", "encerrar", "fim", "tchau", "obrigado"]):
        return "encerrar"

    elif any(p in texto for p in ["ajuda", "menu", "opÃ§Ãµes", "opcao", "opÃ§Ãµes"]):
        return "ajuda"

    else:
        return "desconhecido"

def consultar_produto():
    print("\nğŸ” Confira nossos produtos disponÃ­veis no momento:\n")
    for categoria, itens in produtos.items():
        print(f"ğŸ—‚ï¸  {categoria.capitalize()}:")
        for item in itens:
            print(f"   - {item}")
    print("-" * 50)

def recomendar_produto():
    print("\nğŸ¯ Para te ajudar melhor, qual categoria vocÃª prefere? (celular, notebook ou acessÃ³rio)")
    while True:
        categoria = input("Digite a categoria desejada: ").strip().lower()

        categorias_validas = produtos.keys()
        if categoria in categorias_validas:
            time.sleep(1)
            recomendado = random.choice(produtos[categoria])
            print(f"\nğŸ‘ Ã“tima escolha! Baseado na categoria '{categoria}', recomendamos: *{recomendado}*.\n")
            break
        else:
            print("âŒ NÃ£o reconheci essa categoria. Por favor, escolha entre: celular, notebook ou acessÃ³rio.")

def mostrar_faq(chave):
    respostas = {
        "localizacao": [
            "ğŸ“ Nossa loja fica na Rua do Sol, nÂº 266 - Recife - PE, CEP: 53250-320.",
            "ğŸ  VocÃª pode nos encontrar na Rua do Sol,nÂº 266 - Recife - PE"
        ],
        "horario": [
            "ğŸ•’ Funcionamos de segunda a sexta das 08h Ã s 18h e aos sÃ¡bados das 08h Ã s 12h.",
            "â° Nosso horÃ¡rio Ã© de seg a sex, 08:00 - 18:00, e sÃ¡bado atÃ© meio-dia."
        ],
        "suporte": [
            "ğŸ› ï¸ Para suporte, envie e-mail para suporte@endolog.com ou ligue (81) 4002-9130.",
            "â˜ï¸ Suporte tÃ©cnico pelo telefone (81) 4002-9130 ou email suporte@endolog.com."
        ],
        "status_pedido": [
            "ğŸ“¦ Para consultar seu pedido, acesse a seÃ§Ã£o 'Meus Pedidos' no nosso site ou fale com um atendente.",
            "ğŸ“² VocÃª pode acompanhar seu pedido na Ã¡rea 'Meus Pedidos' do nosso site."
        ]
    }

    resposta = random.choice(respostas.get(chave, ["Desculpe, nÃ£o tenho essa informaÃ§Ã£o."]))
    print(f"\n{resposta}\n")

def iniciar_chatbot():
    saudacao()

    while True:
        texto = input("\nVocÃª: ").strip()
        intencao = entender_intencao(texto)

        if intencao == "saudacao":
            respostas = [
                "ğŸ¤– OlÃ¡ novamente! Em que posso ajudÃ¡-lo(a)?",
                "ğŸ‘‹ Seja bem-vindo(a) de volta! Como posso ajudar?",
                "ğŸ˜€ Estou aqui para ajudar. O que deseja saber?"
            ]
            print(random.choice(respostas))

        elif intencao == "consultar_produto":
            print("Um momento, vou listar os produtos para vocÃª...")
            time.sleep(1.2)
            consultar_produto()

        elif intencao == "recomendacao":
            recomendar_produto()

        elif intencao == "localizacao":
            mostrar_faq("localizacao")

        elif intencao == "horario":
            mostrar_faq("horario")

        elif intencao == "suporte":
            mostrar_faq("suporte")

        elif intencao == "status_pedido":
            mostrar_faq("status_pedido")

        elif intencao == "atendente":
            print("\nğŸ“ Transferindo para um atendente humano... Por favor, aguarde um momento.\n")
            break

        elif intencao == "encerrar":
            print("\nğŸ‘‹ Agradecemos muito sua visita Ã  EndoLog Store.")
            print("Estamos sempre prontos para ajudar. Tenha um Ã³timo dia!\n")
            break

        elif intencao == "ajuda":
            print("\nAqui estÃ£o as opÃ§Ãµes disponÃ­veis para vocÃª:")
            saudacao()

        else:
            respostas_desconhecidas = [
                "â“ NÃ£o entendi muito bem. Poderia reformular sua pergunta?",
                "ğŸ¤” NÃ£o consegui compreender. Por favor, tente de outra forma.",
                "ğŸ˜• Desculpe, nÃ£o sei responder isso. Que tal escolher uma das opÃ§Ãµes do menu?"
            ]
            print(random.choice(respostas_desconhecidas))
            time.sleep(1)
            print("Se precisar, digite 'ajuda' para ver as opÃ§Ãµes novamente.")

iniciar_chatbot()